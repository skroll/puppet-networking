require 'spec_helper'

describe 'netmask2cidr' do
    tests = [
        { :in => '255.255.255.255', :out => '32', },
        { :in => '255.255.255.254', :out => '31', },
        { :in => '255.255.255.252', :out => '30', },
        { :in => '255.255.255.248', :out => '29', },
        { :in => '255.255.255.240', :out => '28', },
        { :in => '255.255.255.224', :out => '27', },
        { :in => '255.255.255.192', :out => '26', },
        { :in => '255.255.255.128', :out => '25', },

        { :in => '255.255.255.0', :out => '24', },
        { :in => '255.255.254.0', :out => '23', },
        { :in => '255.255.252.0', :out => '22', },
        { :in => '255.255.248.0', :out => '21', },
        { :in => '255.255.240.0', :out => '20', },
        { :in => '255.255.224.0', :out => '19', },
        { :in => '255.255.192.0', :out => '18', },
        { :in => '255.255.128.0', :out => '17', },

        { :in => '255.255.0.0', :out => '16', },
        { :in => '255.254.0.0', :out => '15', },
        { :in => '255.252.0.0', :out => '14', },
        { :in => '255.248.0.0', :out => '13', },
        { :in => '255.240.0.0', :out => '12', },
        { :in => '255.224.0.0', :out => '11', },
        { :in => '255.192.0.0', :out => '10', },
        { :in => '255.128.0.0', :out => '9',  },

        { :in => '255.0.0.0', :out => '8', },
        { :in => '254.0.0.0', :out => '7', },
        { :in => '252.0.0.0', :out => '6', },
        { :in => '248.0.0.0', :out => '5', },
        { :in => '240.0.0.0', :out => '4', },
        { :in => '224.0.0.0', :out => '3', },
        { :in => '192.0.0.0', :out => '2', },
        { :in => '128.0.0.0', :out => '1', },

        { :in => '0.0.0.0', :out => '0', },
    ]

    tests.each do |test|
        it "should return '%s' with input '%s'" % [test[:out], test[:in]] do
            should run.with_params(test[:in]).and_return(test[:out])
        end
    end
end
